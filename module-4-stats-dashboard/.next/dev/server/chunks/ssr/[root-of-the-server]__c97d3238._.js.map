{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Duvan/Desktop/Actividades_8vo_semestre_Ing_Sistemas/Sistemas_distribuidos/url-Shortener-system/frontend-modules/module-4-stast-dashboard/app/page.tsx"],"sourcesContent":["import type React from \"react\"\r\nimport { useState } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\r\nimport { Search, TrendingUp, Globe, Monitor, Link2 } from \"lucide-react\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport { StatsCharts } from \"@/components/stats-charts\"\r\nimport { StatsTable } from \"@/components/stats-table\"\r\n\r\ninterface URLStats {\r\n  code: string\r\n  longUrl: string\r\n  totalClicks: number\r\n  clicksByDate: { date: string; clicks: number }[]\r\n  clicksByCountry: { country: string; clicks: number }[]\r\n  clicksByDevice: { device: string; clicks: number }[]\r\n  clicksByReferrer: { referrer: string; clicks: number }[]\r\n  createdAt: string\r\n  lastClickAt: string | null\r\n}\r\n\r\nexport default function StatsPage() {\r\n  const [urlCode, setUrlCode] = useState(\"\")\r\n  const [stats, setStats] = useState<URLStats | null>(null)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const { toast } = useToast()\r\n\r\n  const handleSearch = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!urlCode) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Please enter a URL code\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    setIsLoading(true)\r\n\r\n    try {\r\n      const response = await fetch(`/api/stats/${urlCode}`)\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch stats\")\r\n      }\r\n\r\n      const data = await response.json()\r\n      setStats(data)\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to fetch statistics. Please check the URL code.\",\r\n        variant: \"destructive\",\r\n      })\r\n      setStats(null)\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleReset = () => {\r\n    setUrlCode(\"\")\r\n    setStats(null)\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Header */}\r\n      <header className=\"border-b border-border bg-card\">\r\n        <div className=\"container mx-auto px-4 py-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <TrendingUp className=\"h-6 w-6 text-primary\" />\r\n            <span className=\"text-xl font-semibold\">URL Analytics Dashboard</span>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        {/* Search Section */}\r\n        <div className=\"mb-8\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Search URL Statistics</CardTitle>\r\n              <CardDescription>Enter a short URL code to view detailed analytics</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <form onSubmit={handleSearch} className=\"flex gap-3\">\r\n                <div className=\"flex-1 relative\">\r\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\r\n                  <Input\r\n                    placeholder=\"Enter URL code (e.g., abc123)\"\r\n                    value={urlCode}\r\n                    onChange={(e) => setUrlCode(e.target.value)}\r\n                    disabled={isLoading}\r\n                    className=\"pl-10 h-11\"\r\n                  />\r\n                </div>\r\n                <Button type=\"submit\" disabled={isLoading} size=\"lg\">\r\n                  {isLoading ? \"Searching...\" : \"Search\"}\r\n                </Button>\r\n                {stats && (\r\n                  <Button type=\"button\" variant=\"outline\" onClick={handleReset} size=\"lg\">\r\n                    Clear\r\n                  </Button>\r\n                )}\r\n              </form>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Stats Display */}\r\n        {stats && (\r\n          <div className=\"space-y-6\">\r\n            {/* Overview Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardDescription>Total Clicks</CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-3xl font-bold text-primary\">{stats.totalClicks.toLocaleString()}</div>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardDescription>Short Code</CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-mono font-semibold\">{stats.code}</div>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardDescription>Created</CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-lg font-medium\">{new Date(stats.createdAt).toLocaleDateString()}</div>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardDescription>Last Click</CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-lg font-medium\">\r\n                    {stats.lastClickAt ? new Date(stats.lastClickAt).toLocaleDateString() : \"Never\"}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Original URL */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"text-base flex items-center gap-2\">\r\n                  <Link2 className=\"h-4 w-4\" />\r\n                  Original URL\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <a\r\n                  href={stats.longUrl}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"text-primary hover:underline break-all\"\r\n                >\r\n                  {stats.longUrl}\r\n                </a>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Charts Section */}\r\n            <Tabs defaultValue=\"timeline\" className=\"space-y-4\">\r\n              <TabsList className=\"grid w-full grid-cols-4\">\r\n                <TabsTrigger value=\"timeline\">Timeline</TabsTrigger>\r\n                <TabsTrigger value=\"geography\">Geography</TabsTrigger>\r\n                <TabsTrigger value=\"devices\">Devices</TabsTrigger>\r\n                <TabsTrigger value=\"referrers\">Referrers</TabsTrigger>\r\n              </TabsList>\r\n\r\n              <TabsContent value=\"timeline\" className=\"space-y-4\">\r\n                <StatsCharts\r\n                  data={stats.clicksByDate}\r\n                  type=\"timeline\"\r\n                  title=\"Clicks Over Time\"\r\n                  description=\"Daily click activity for this URL\"\r\n                />\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"geography\" className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                  <StatsCharts\r\n                    data={stats.clicksByCountry}\r\n                    type=\"bar\"\r\n                    title=\"Clicks by Country\"\r\n                    description=\"Geographic distribution of clicks\"\r\n                  />\r\n                  <Card>\r\n                    <CardHeader>\r\n                      <CardTitle className=\"flex items-center gap-2\">\r\n                        <Globe className=\"h-5 w-5\" />\r\n                        Top Countries\r\n                      </CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <StatsTable data={stats.clicksByCountry} type=\"country\" />\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"devices\" className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                  <StatsCharts\r\n                    data={stats.clicksByDevice}\r\n                    type=\"pie\"\r\n                    title=\"Device Types\"\r\n                    description=\"Breakdown of devices used to access this URL\"\r\n                  />\r\n                  <Card>\r\n                    <CardHeader>\r\n                      <CardTitle className=\"flex items-center gap-2\">\r\n                        <Monitor className=\"h-5 w-5\" />\r\n                        Device Details\r\n                      </CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <StatsTable data={stats.clicksByDevice} type=\"device\" />\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"referrers\" className=\"space-y-4\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Traffic Sources</CardTitle>\r\n                    <CardDescription>Where your clicks are coming from</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <StatsTable data={stats.clicksByReferrer} type=\"referrer\" />\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n            </Tabs>\r\n          </div>\r\n        )}\r\n\r\n        {/* Empty State */}\r\n        {!stats && !isLoading && (\r\n          <Card className=\"mt-12\">\r\n            <CardContent className=\"flex flex-col items-center justify-center py-16\">\r\n              <TrendingUp className=\"h-16 w-16 text-muted-foreground mb-4\" />\r\n              <h3 className=\"text-xl font-semibold mb-2\">No statistics to display</h3>\r\n              <p className=\"text-muted-foreground text-center max-w-md\">\r\n                Enter a URL code above to view detailed analytics including clicks, geographic data, device information,\r\n                and more.\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}